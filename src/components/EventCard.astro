---
import { Image } from 'astro:assets'
import {
  Card,
  CardContent,
  CardHeader,
  CardFooter,
  CardTitle,
  CardDescription,
} from '@/components/ui/card'
import { Badge } from '@/components/ui/badge'
import eventImage from '../assets/images/zia-lisa.jpg'
import EventPrices from './EventPrices.astro'

export interface Props {
  event: {
    data: {
      title: string
      subtitle: string
      date: Date
      location: string
      prices: {
        name: string
        price: number
      }[]
    }
    render: () => Promise<{ default: any }>
  }
}

const { event } = Astro.props
console.debug(event)

const { title, subtitle, date, location, prices } = event.data

const { Content } = await event.render()
---

<Card>
  <div class="flex flex-col items-center md:flex-row">
    <div class="min-w-72 flex-1 space-y-4 align-top sm:min-w-96">
      <CardHeader>
        <div class="flex items-center gap-1">
          <Badge variant="outline">
            {date.toLocaleDateString()}
          </Badge>
          <Badge variant="outline">
            {location}
          </Badge>
        </div>

        <CardTitle>
          {title}
        </CardTitle>
        <CardDescription>
          {subtitle}
        </CardDescription>

        <Image
          src={eventImage}
          width={600}
          alt="Zia Lisa"
          layout="responsive"
          class="rounded-sm shadow-lg"
        />
      </CardHeader>
    </div>
    <div>
      <CardContent>
        <div class="text-md space-y-3">
          <Content />
        </div>
      </CardContent>
      <CardFooter>
        <EventPrices prices={prices} />
      </CardFooter>
    </div>
  </div>
</Card>
